/*! HammerHead2 11-07-2014 */
function interpolate(a){var b=0;return function(c){return a.replace(/%(?:\(([^)]+)\))?([%diouxXeEfFgGcrs])/g,function(a,d,e){return"%"===e?"%":c[d||b++]})}}function missingCTM(a){var b=a.width(),c=a.height(),d=a[0].getScreenCTM().a,e=a.attr("viewBox").split(" ")[2],f=a.attr("viewBox").split(" ")[3],g=e*d/b,h=f*d/c,i=g>h?g:h;return _.round(1)(i)}var argsToList=function(a){return Array.prototype.slice.call(a)},isArray=function(a){return a&&a.constructor===Array},isObj=function(a){return"object"==typeof a&&!isArray(a)},isDefined=function(a){return void 0!==a},_=function(){"use strict";function a(a){return function(b){for(var c=0;c<b.length;c++)if(a.call(this,b[c],c)===R)return}}function b(a){return function(b){for(var c=b.length-1;c>-1;c--)if(a.call(this,b[c],c)===R)return}}function c(b){return function(c){var d=this;a(function(a){return b.call(d,c[a],a)})(Object.keys(c))}}function d(b){return function(d){arguments.length>1&&(d=argsToList(arguments)),isArray(d)?a(b).call(this,d):c(b).call(this,d)}}function e(b){return function(c){var d=[];return a(function(a,c){d.push(b.call(this,a,c))}).call(this,c),Q?Object.freeze(d):d}}function f(a){return function(b){var d={};return c(function(b,c){d[c]=a.call(this,b,c)}).call(this,b),Q?Object.freeze(d):d}}function g(a){return function(b){return arguments.length>1&&(b=argsToList(arguments)),isArray(b)?e(a).call(this,b):f(a).call(this,b)}}function h(b){return function(c){var d=[];return a(function(a,c){b.call(this,a,c)&&d.push(a)}).call(this,c),Q?Object.freeze(d):d}}function i(a){return function(b){var d={};return c(function(b,c){a.call(this,b,c)&&(d[c]=b)}).call(this,b),Q?Object.freeze(d):d}}function j(a){return function(b){return arguments.length>1&&(b=argsToList(arguments)),isArray(b)?h(a).call(this,b):i(a).call(this,b)}}function k(a){return function(b){return function(){var c=a;return d(function(a,d){c=isDefined(c)?b.call(this,c).call(this,a,d):a}).apply(this,arguments),c}}}function l(a){return function(){var b;return d(function(c){return a.call(this,c)?(b=c,R):void 0}).apply(this,arguments),b}}function m(a){return a=a||F,function(){var b=!0;return d(function(c,d){return b=a.call(this,c,d),b?void 0:R}).apply(this,arguments),b}}function n(a){return a=a||F,function(){var b=!1;return d(function(c,d){return b=a.call(this,c,d),b?R:void 0}).apply(this,arguments),b}}function o(a){return a=a||F,function(){var b;return d(function(c){b=b&&a.call(this,b)<a.call(this,c)?b:c}).apply(this,arguments),b}}function p(a){return a=a||F,function(){var b;return d(function(c){b=b&&a.call(this,b)>a.call(this,c)?b:c}).apply(this,arguments),b}}function q(a){return function(b){return a=0>a?b.length+a:a,[b.slice(0,a),b.slice(a)]}}function r(b){var c=[];return B(b)(function(){c.push([])}),function(d){return a(function(a,d){c[d%b].push(a)})(d),c}}function s(a){return arguments.length>1&&(a=argsToList(arguments)),function(b){return-1!==a.indexOf(b)}}function t(a){return function(b){return c(function(a,c){b[c]=a})(a),b}}function u(a){return function(b){return c(function(b,c){a[c]=b})(b),a}}function v(a){return function(b){var e={};return d(c(function(a,b){e[b]=a}))(a||{},b||{}),Q?Object.freeze(e):e}}function w(a){return function(b){var e={};return d(c(function(a,b){e[b]=a}))(b||{},a||{}),Q?Object.freeze(e):e}}function x(a){return function(b){return a[b]}}function y(a){return function(b){return function(){return a.call(this,b.apply(this,arguments))}}}function z(){var a=arguments;return function(b){return b.apply(this,a)}}function A(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(this,b)}}function B(a){return function(b){for(var c=0;a>c;c++)b.call(this,c)}}function C(a){return function(b){var c,d;return function(){var e=this;d=arguments,clearTimeout(c),c=setTimeout(function(){b.apply(e,d)},a)}}}function D(a){return function(b){var c,d;return function(){d=arguments;var e=this;c||(c=setTimeout(function(){c=null,b.apply(e,d)},a))}}}function E(a){return function(){return!a.apply(this,arguments)}}function F(a){return a}function G(a){return function(b){return isArray(a)||isObj(a)?g(z(b))(g(G)(a)):b[a]}}function H(a){return function(b){return b&&b[a]&&b[a]()}}function I(b){var c=b.split(" ");a(function(a){window[a]=X[a]})(c)}function J(){Q=!1}function K(){Q=!0}function L(){return R}function M(a){return a.length||Object.keys(a).length}function N(){console.log.apply(console,arguments)}function O(a){return function(b,c){return a(c)}}function P(a){return function(b){return a===b}}var Q=!0,R={},S=Date.now||function(){return(new Date).getTime()},T=k()(y),U=T(h,E),V=T(i,E),W=T(j,E),X={eachArray:a,eachArrayRight:b,eachObject:c,each:d,mapArray:e,mapObject:f,map:g,filterArray:h,rejectArray:U,filterObject:i,rejectObject:V,filter:j,reject:W,reduce:k,find:l,all:m,any:n,min:o,max:p,cyclic:r,cleave:q,within:s,extend:t,augment:u,foundation:v,overlay:w,peruse:x,adjoin:y,compose:T,invoke:z,postpone:A,debounce:C,throttle:D,not:E,I:F,dot:G,method:H,now:S,times:B,expose:I,defreeze:J,refreeze:K,size:M,log:N,position:O,equals:P,BREAK:L};return X}();!function(a){"use strict";function b(a){a=a||0;var b=Math.pow(10,a),c=Math.pow(.1,a+1);return function(a){return Math.round(a*b+c)/b}}function c(a){return a=a||0,function(){return Math.random()*a|0}}a.round=b,a.random=c}(_),!function(a){a.pluck=a.compose(a.map,a.dot),a.pick=a.compose(a.filter,a.position,a.within),a.omit=a.compose(a.filter,a.position,a.not,a.within)}(_);var SVGroovy={};!function(a){"use strict";function b(a,b){if(isObj(a)){if(a.x)return c(a);if(a.pageX)return d(a);if(a.deltaX)return e(a)}var f=m.createSVGPoint();return f.x=a||0,f.y=b||0,f}function c(a){return b(a.x,a.y)}function d(a){return b(a.pageX,a.pageY)}function e(a){return b(a.deltaX,a.deltaY)}function f(a){return function(c){return b(a.x+c.x,a.y+c.y)}}function g(a){return function(c){return b(a.x-c.x,a.y-c.y)}}function h(a){return function(c){return c=c||b(),b(c.x-a.x,c.y-a.y)}}function i(a){return function(c){return b(a*c.x,a*c.y)}}function j(a){return function(c){var d=a.x<c.x?a.x:c.x,e=a.y<c.y?a.y:c.y;return b(d,e)}}function k(a){return function(c){var d=a.x>c.x?a.x:c.x,e=a.y>c.y?a.y:c.y;return b(d,e)}}function l(a){return function(b){return b.matrixTransform(a)}}var m=document.createElementNS("http://www.w3.org/2000/svg","svg");a.Point=_.extend({createFromCoordinate:c,createFromPagePoint:d,createFromDisplacementVector:e,add:f,subtract:g,negate:h,scalar:i,min:j,max:k,matrixTransform:l})(b)}(SVGroovy),function(a){"use strict";function b(a){var b=0;return function(c){return a.replace(/%(?:\(([^)]+)\))?([%diouxXeEfFgGcrs])/g,function(a,d,e){return"%"===e?"%":c[d||b++]})}}function c(){return d.createSVGMatrix()}var d=document.createElementNS("http://www.w3.org/2000/svg","svg");a.Matrix=c,a.Matrix.toScale=function(a){return c().scale(a)},a.Matrix.toTranslate=function(a){return c().translate(a.x,a.y)},a.Matrix.asCss=function(a){return b("matrix(%(a)s, %(b)s, %(c)s, %(d)s, %(e)s, %(f)s)")(a||c())},a.Matrix.asCss3d=function(a){return b("matrix3d(%(a)s, %(b)s, 0, 0, %(c)s, %(d)s, 0, 0, 0, 0, 1, 0, %(e)s, %(f)s, 0, 1)")(a||c())}}(SVGroovy);var transformObject=function(a){return{"-webkit-transform":a,"-ms-transform":a,transform:a}};!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var Hammerhead={};!function(a){"use strict";function b(a,b){return"string"==typeof a?c(a):Object.freeze({minimal:a,maximal:b})}function c(a){function c(a){return parseInt(a,10)}var d=a.split(" ").map(c),e=i(d[0],d[1]),f=i(d[2],d[3]),g=i.add(e)(f);return b(e,g)}function d(a){var b=a.minimal.x,c=a.minimal.y,d=a.maximal.x,e=a.maximal.y,f=[b,c,d-b,e-c];return f.join(" ")}function e(a){return i.scalar(.5)(i.add(a.minimal)(a.maximal))}function f(a){return function(b){var c=_.map(i.negate(a));return Object.freeze(c(b))}}function g(a){return function(b){var c=_.map(i.scalar(1/a));return Object.freeze(c(b))}}function h(a){return function(b){return function(c){return b=b||e(c),_.compose(f(i.negate(b)()),g(a),f(b))(c)}}}var i=SVGroovy.Point,j=_.extend({midpoint:e,translate:f,scale:g,zoom:h,attrString:d});j(b),a.ViewBox=b}(Hammerhead),function(a){"use strict";var b=interpolate("-%(height)spx -%(width)spx");a.regulateOverflow=function(){var a=this.getConfig("overflowSurplus"),c=2*a+1,d=this.$element,e=d.parent(),f=function(){var f=e.height(),g=e.width();d.css("margin",b({height:f*a,width:g*a})).width(g*c).height(f*c)};return f(),setTimeout(f,1e3),bean.on(window,"resize",f),function(){bean.off(window,"resize",f)}}}(Hammerhead),function(a){"use strict";var b=SVGroovy.Point,c=Hammer(document);a.dispatchTouch=function(){var a=this.element,d=this.isComponent,e=!1,f=!1,g=!1;return c.on("touch",function(a){a.gesture.preventDefault(),e=d(a.target)}),c.on("drag",function(c){c.gesture.preventDefault(),e&&!g&&(f=b(c.gesture),bean.fire(a,"displace",b(c.gesture)))}),c.on("pinch",function(b){b.gesture.preventDefault(),e&&(f=!1,g=b.gesture.scale,bean.fire(a,"inflate",g))}),c.on("release",function(b){b.gesture.preventDefault(),e&&(f&&bean.fire(a,"translate",f),g&&bean.fire(a,"magnify",g),e=!1,g=!1,f=!1)}),function(){c.dispose()}}}(Hammerhead),function(a){"use strict";var b=SVGroovy.Point,c=SVGroovy.Matrix,d=a.ViewBox,e=_.compose(transformObject,c.asCss3d);a.managePosition=function(){function a(){g||(g=requestAnimationFrame(function(){i.css(e(h)),g=!1}))}function f(){cancelAnimationFrame(g),g=!1,requestAnimationFrame(function(){i.css(e()),i.attr("viewBox",d.attrString(d.zoom(.5)()(l)))})}var g,h,i=this.$element,j=this.element,k=missingCTM(i),l=d(i.attr("viewBox"));return console.log(d(i.attr("viewBox"))),console.log(d.attrString(l)),bean.on(j,"displace",function(b){h=c.toTranslate(b),a()}),bean.on(j,"inflate",function(b){h=c.toScale(b),a()}),bean.on(j,"translate",function(a){k=1;var c=b.scalar(k)(a),e=i[0].getScreenCTM().inverse();e.e=0,e.f=0;var g=b.matrixTransform(e),h=g(c);l=d.translate(h)(l),f()}),bean.on(j,"magnify",function(a){l=d.zoom(a)()(l),f()}),i.css(e()),i.attr("viewBox",d.attrString(d.zoom(.5)()(l))),function(){bean.off(j)}}}(Hammerhead),function(a){"use strict";a.mousewheelDispatch=function(){var a,b=this.$element[0],c=1+this.getConfig("mousewheelSensitivity"),d=_.debounce(this.getConfig("mousewheelDelay"))(function(c){bean.fire(b,"magnify",c),a=null}),e=function(e){if(!a){if(!this.isComponent(e.target))return;a=1}e.wheelDelta>0?a*=c:a/=c,bean.fire(b,"inflate",a),d(a)}.bind(this);$(document).on("mousewheel",e)}}(Hammerhead),function(a){"use strict";function b(a){return function(b){return(b.ownerSVGElement||b)===a}}function c(c,f){var g=$("svg#"+c),h=g[0];if(!h)return console.warn(interpolate("SVG element '%(id)s' not found")({id:c})),!1;var i=_.augment(Object.create(d))({$element:g,element:h,isComponent:b(h),getConfig:_.peruse(e(f))});return i.clear=a.regulateOverflow.call(i),a.dispatchTouch.call(i),a.managePosition.call(i),a.mousewheelDispatch.call(i),i}var d={},e=_.foundation({mousewheelSensitivity:.1,mousewheelDelay:200,maxZoom:2,minZoom:.5,overflowSurplus:.5,resizeDelay:200});a.create=c}(Hammerhead);